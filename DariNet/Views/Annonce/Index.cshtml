@model IEnumerable<DariNet.Models.Annonce>

@{
    ViewBag.Title = "Index";
}
<div style="text-align:center">
    <h2>check our new announces </h2>
</div>
<div>
	<a href="@Url.Action("Create","Annonce")" style="color:brown"><i class="far fa-plus-square ">Add</i></a>
</div>
@using (Html.BeginForm())
{
    <div style="text-align:right">
        <span>
            recherche par :@Html.TextBox("filtre")
        </span>
        <div>
            @Html.RadioButton("type", "V")@Html.Label("Ville")
            @Html.RadioButton("type", "A")@Html.Label("Adresse")
            @Html.RadioButton("type", "R")@Html.Label("Region")
        </div>
        <input type="submit" class="btn-primary" value="Search" id="submit" />
    </div>
}


<div class="container">
    @foreach (var item in Model)
    {

        <div class="col-sm-4 rides-grid">
            <div class="agileinfo-work">
                <img src="~/Content/Upload/@item.photo" alt="" height="200" width="200" />
                <h4>@item.title</h4>
                <p>@item.description</p>

                <ul>
                    <li> <p>price : @item.prix</p></li>

                    <li><i class="fa fa-arrow-right" aria-hidden="true"></i> <a href="@Url.Action("Details","Annonce",new { id=item.id})">Click on me for more Details</a></li>
                </ul>
            </div>
        </div>
    }
</div>



<div id="chartContainer"></div>

<script type="text/javascript">
  window.onload = function () {

var chart = new CanvasJS.Chart("chartContainer", {
	exportEnabled: true,
	animationEnabled: true,
	theme: "light2",
	title: {
		text: "Top wanted Regions"
	},
	legend: {
		cursor: "pointer",
		itemclick: explodePie,
		verticalAlign: "center",
		horizontalAlign: "right"
	},
	data: [{
		type: "pie",
		showInLegend: true,
		toolTipContent: "{name}: <strong>{y}%</strong>",
		startAngle: -45,
		indexLabel: "{name} ({y}%)",
		indexLabelFontColor: "#12122B",
		indexLabelPlacement: "inside",
		indexLabelFontSize: 15,
		dataPoints: @Html.Raw(ViewBag.DataPoints)
	}]
});
chart.render();

function explodePie(e) {
	if (typeof (e.dataSeries.dataPoints[e.dataPointIndex].exploded) === "undefined" || !e.dataSeries.dataPoints[e.dataPointIndex].exploded) {
		e.dataSeries.dataPoints[e.dataPointIndex].exploded = true;
	} else {
		e.dataSeries.dataPoints[e.dataPointIndex].exploded = false;
	}
	e.chart.render();
}

}
</script>
